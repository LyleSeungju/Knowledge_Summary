#### 강의 전 사전 간단 리뷰
- Linux 
- Docker 
	- Container Runtime
- Kubernetes
- AWS
- CI/ CD

+ 경험 위주 실습, 깊이 있는 탐색

#### 목차
- 네트워크 
- OSI 7 Layer
- Network Address & Host Address
- Encapsulation & Decapsulation

#### 네트워크란?
- 통신 분야에서는 단말기 등을 접속하기 위해 사용되는 단말기기, 선로 및 교환기 등으로 구성되는 전송매체?
- 단말 사용자들끼리 통신을 가능케 할 목적?
- 통신망?

#### 네트워크를 왜 알아야 하는 걸까?
- 통신이나 데이터 교환 : 컴퓨터와 다른 장치가 서로 통신
- 분산시스템 및 클라우드 컴퓨팅 : 여러 컴퓨터가 네트워크를 통해 상호작용하여 하나의 시스템처럼 작동하는 기술
	- 대규모 데이터 처리함
- 보안: 해킹, 데이터 유출이 대부분 네트워크를 통해 이뤄지기 때문

- 네트워크 종류  - LAN, VPN, WLAN, WAN
- 용어 - IP, 노드, 라우터, 스위치, 포트 등
- OSI 7 Layer
- 네트워크 서브넷 - SubnetMask, Subnetting, CIDR
- 네트워크 장비 - 리피터, 허브, 브리지, 라우터

#### OSI 7 Layer
7. 응용 계층: 사용자나 애플리케이션이 네트워크에 접근 할 수 있도록
   - HTTP, HTTPS, FTP, SMTP, POP3, IMAP, DNS, Telnet, SNMP
4. 전송 계층: 데이터 전송의 신뢰성, 흐름제어, 오류 검출 및 수정 기능 
   - TCP, UDP
3. 네트워크 계층: 경로 설정 및 패킷 전달, 논리적 주소 지정
   - IP
2. 데이터 링크 계층: 물리적 주소 지정(mac), 프레임 전달 및 오류 검출
   - Ethernet

- 어떤 곳은 4계층으로도 표현하기도 함? 왜?? **4계층을 많이 씀** 

#### 데이터 링크 계층 프로토콜
- 이더넷
	- Local Area Network에서 데이터 전송 위해
	- Mac주소 - 네트워크 인터페이스의 고유한 식별자
	- 데이터 **프레임**이라는 단위로 전송
	- 프레임 frame -mac 주소, 데이터, 오류 검출 코드 등
- Bridge
	- 네트워크 세그먼트를 서로 연결해주는 방식 > 소프트웨어 방식
		- 하나의 네트워크 망 안에서 서로 다른 LAN 연결 
		- mac 주소 기반 필터링 기능을 통해 더 나은 대역폭 제공, 트래픽 통제
- Switch
	- 목적지 mac 주소를 가지고 있는 포트에만 프레임 전송, 처리 방식 > 하드웨어

- IP - **패킷**을 주고 받는다 == ip를 주고 받는다
	- 네트워크 계층에 대한 데이터
	- 패킷
	- 다양한 기능이 있는데 주로 긴으
		- 주소 지정 ip, - ipv4, ipv6 버젼이 있음
		- 경로 선택 routing
		- 패킷의 형식 및 구조 - 패킷은 헤더와 데이터, 헤더에는 출발지, 목적지 주소, TTL, 프로토콜 정보 등

#### IPv4 구조 
wireShark로 패킷을 이렇게 볼 수 있구나를 확인
![[Pasted image 20240704223708.png]]
- nslookup 명령어 > 어떤 주소에 대한 Address가 보임
	- 왜 할때마다 주소가 바뀜?aws에서 로드밸런스에 의해 다른 서버에 배정되기 때문에 바뀔 수 있음.
- ifconfig | grep inet
#### IPv4 주소 구성 및 헤더 
: ipv4는 32비트로 이뤄져 있으며, 그 크기는 42억개를 나타내기에 부족하여, 개별적으로 부여 할 수 없음 
- 이를 지원하기 위해 네트워크 클래스 존재
	- A클래스
	- B클래스
	- C클래스
	- D클래스
	- E클래스

#### IPv4 특수 용도 주소 == CIDR
 
| 0.0.0.0/8      | 자체 네트워크          |
| -------------- | ---------------- |
| 10.0.0.0/8     | 사설 네트워크          |
| 127.0.0.0/8    | 루프백 - 자기 자신      |
| 169.254.0.0/16 | 링크 로컬            |
| 172.16.0.0/12  | 사설 네트워크          |
| 192.0.2.0/24   | 예제 등 문서에서 사용     |
| 192.88.99.0/24 | 6to4 릴레이 애니캐스트   |
| 192.168.0.0/16 | 사설네트워크           |
| 198.18.0.0/15  | 네트워크 장비 벤치마킹 테스트 |
| 224.0.0.0/4    | 멀티캐스트            |
| 240.0.0.0/4    | 미래 사용 용도         |
** 이거 형식은 이런걸 알겠는데 어떤걸 보고 이거다~ 라는걸 아는지?

#### Network Address & Host Address 관리 
- 서브넷 - 네트워크가 분할되어 나눠진 작은 네트워크  >> "사설 네트워크"
- 서브넷팅 - 서브넷을 나누기 위함
- 서브넷 마스크
- CIDR(prefix)
	- 서브넷 마스크를 간소화하여 표현
	- 클래스 없는 도메인 간 라우팅(ip 주소 할당)

#### Router 
- 기능이 많은 라우터
- 데이터 패킷이 네트워크를 통과하여 대상에 도달하는 경로를 선택 
- 서로 다른 네트워크에 연결하고 인터넷을 구성하는 LAN. WAB 등 네트워크에서 네트워크로 데이터 전달

#### NAT
- 만약 내 아이피를 하면 그 회신에 대한 주소가 나타내지게 도와주는 
- 포트포워딩
- Private IP > Public IP 변환해주고, 외부에서는 공인 IP 처럼 사용

#### 전송 계층 특징
- TCP: 연결 지향형, 신뢰성
	- **3 - way handshake?** 흐름제어? 혼잡제어?
	- 주고받는다라는 의미가 어느정도 신뢰성을 보장해줬다라는 것을 알 수 있다. 
	- 메세지를 보냈는데 답장을 한거니까 아 확인했구나 싶지만
	  답장을 안하면? 얘가 확인했나 싶은
	- 왜 연결지향적일까?를 생각하면 흐름제어, 혼잡제어,헤더를 생각하고 이러한 절차를 생각하면 3 handshake를 생각하게 되고 그렇다.
- UDP: 비연결형 프로토콜,
	- 내가 보냈는데 얘가 보내졌는지 아닌지 모르겠다. 그러니까 신뢰성 낮고, 대신에 TCP보다는 속도가 빠를거고, 등등

#### TCP / UDP 동작
- 실제로 실습 해보자

#### 응용 계층 프로토콜
- HTTP : 비 연결성 프로토콜
	- 쿠키와 세션의 등장으로 보완해줌
	- 암호화가 되지 않음
- HTTPS 등장


#### HTTP/HTTPS response


#### Man In The Middle(MITM)
: 출발지와 끝지점의 사이에 껴서 뭔가를 하는?
- 프록시 > 들어오는 리소스에 대해서 중간에 경유해서 가게끔
	- 그걸 도움을 주는게 burpsuite, fiddler?
- curl 명령어
	- - x : 프록시 옵션

#### Encapsulation & Decapsulation

계층별 데이터 송수신
- 헤더 - 캡슐화, 역캡슐화 

#### PDU protocol data unit : 프로토콜 별 데이터 단위
	- 메세지(데이터)
	- TCP '세그먼트'
	- IP '패킷'
	- 이더넷 '프레임'


#### 3-Way Hand Shake
- Syn 연동 : A클라 > B 서버 접속 요청 SYN 패킷
- Syn + ACK 연동: B서버 SYN요청을 받고 A클라에게 요청을 수락하는 ACK와 SYN fla 를 응답
- ACK 응답: A클라 > B서버에게 ACK 
#### 흐름제어
- 송신측과 수신측의 데이터 처리 속도 차이를 해결하기 위한 기법
	- 수신측이 송신측보다 데이터 처리 속도가 빠르면 괜찮다.
	- 수신측에서 제한된 저장 용량을 초과하면 데이터 손실이 일어날 수 있고, 이로 인해 불필요한 응답과 데이터 전송이 빈번히 발생
	- 이래서 조절이 필요
	-  stop and wait
	- sliding window (go back N ARQ)
	

- flow control은 수신자가 패킷을 지나치게 많이 받지 않게 조절
- 기본 개념은 수신자가 전송자에게 자신의 상태를 피드백
#### 혼잡제어
- 송신측의 데이터 전달과 네트워크 데이터 처리 속도 차이를 해결
- 네트워크 내에 패킷의 수가 과도하게 증가하는 현상을 혼잡이라 하며, 혼잡 현상을 방지하거나 제거하는 기능
- 흐름제어가 송신측과 수신측 사이의 전송속도를 다루는데 반해, 혼잡제어는 호스트와 라우터를포함한 보다 넓은 관점에서 전송 문제를 다루게 된다.
	- AIMD
	- Slow Start
	- Fast Retransmit
	- Fast Recovery

#### 실습1 
WireShark를 사용하여, 네트워크 패킷 캡쳐
- 실제 웹 사이트에 요청하여, 네트워크 패킷 캡쳐하기
- 캡쳐 된 패킷에 대해 패킷 구조에 맞게 확인해보기
	- 강의시간에 각각 프로토콜별로 TCP는 어떤 헤더 구조를 가지고 있고, HTTP는 어떤 헤더 구조를 가지고 있는데, 이 구조에 맞게 확인해보는걸 말씀드렸어요!

#### 실습2
TCP/UDP에 대한 서버 및 클라이언트 코드 작성
• Client가 TCP/UDP Server에 요청
• 요청 된 결과를 Wireshark로 패킷 확인해보기

#### 실습3
명령어 확인(사용)해보기 
- CURL 
- tcpdump  - wireshark 비슷
- traceroute 
- iptables - 네트워크 방화벽


#### 용어
• 네트워크 종류 
• LAN, VPN, WLAN, WAN, ... 
• 용어 
• IP, 노드, 라우터, 스위치, 포트, 네트워크 케이블 유형?, ... 
• OSI 7 Layer 
• 계층별특징 
•네트워크 서브넷 
• SubnetMask, Subnetting, CIDR, ... 
• 네트워크 장비 • 리피터, 허브, 브리지, 라우터,

-DNS 설명을 하다 말았는데
local /etc/hosts

tmux attach -t test 명령어

깃크라켄

