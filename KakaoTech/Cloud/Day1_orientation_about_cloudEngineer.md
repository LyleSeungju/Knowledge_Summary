
담임강사님 : 남유석 James  - Infrastructure Engineer / Fullstack
주강사 : 오세준 Jcub
주강사: 김우석 Jerry

교육 운영 매니져: 김현 Tami 

중요하게 생각하는 부분
 - 클라우드 직군으로써 알아야 될 내용 뿐만 아니라 무조건 도움이 될 부분을 중심
 - 클라우드 도메인에 대한 이해 중심
 - 기초와 실습 사례 중심의 강의 + **프로젝트 / 실습 위주** - 실제 운영하면서 경험했던 부분들
 - 교육생 분들의 주도적인 의사결정 기반 > 프로젝트를 할때는 Why 중심으로 직접 소프트웨어 스택 및 인프라 환경을 선택하는 형태로 운영

클라우드 서비스가 없는 시절에는 어떻게 서비스를 운영했을까?
 - 회사마다 서버실을 만들었을 것이다.  - 서버 구축 및 증설을 모두 수동으로
	 - 운영할 소프트웨어의 컴퓨팅 파워를 직접 구현(cpu, memory, 저장 용량)
	 - 서버실에 서버를 넣어, os 설치부터 소프트웨어 설치까지 직접
	 - 여러 대라면 서버 간의 네트워크 세팅
- 이런 상황에서 문제가 생긴다면?
	- 서버가 부족해서 빠르게 증축
	- 서버의 리소스 남는
	- 정전
	- 물리적인 보안은 어떻게 관리?
	- 소프트웨어 업데이트는 어떻게?

**클라우드 엔지니어가 하는 일**
- **서비스 구축 및 자동화** 
	- 서비스를 구축하고 그 과정을 코드화(Infrastructure as code, IaC) 
	- ansible, terraform 이용 구축 프로세스 자동화
	- github actions,. jenkins 등을 이용한 배포 자동화 
- **데이터 운영 및 백업**
	- 데이터 베이스 구축 및 관리(mysql, mongodb 등)
	- 제품에서 저장하는 로그, DB데이터, 파일 시스템 데이터, Object Storage 데이터 관리
	- 모든 데이터에 대한 분실 가능성을 두고 백업 및 복구 관리 
- **전체 보안**
	- 클라우드 보안, 네트워크 보안, 시스템, 데이터, 애플리케이션 보안 등 전체 보안을 관리
	- 국내 개인 정보 처리 방침, 유럽 GDPR 개인 정보 처리 이해하고 시스템 구성 
- **서비스 모니터링 및 장애 대응**
	- 서비스 리소스 모니터링 > 이슈 시 알람 설정 진행
	- 서비스 장애 상황을 3단계 (warning , high, disaster )같이 구별하여 대응
	- 장애 발생 시 프로세스 화 된 장애 대응 프로세스 대응
- **클라우드 비용 관리**
	- 클라우드 비용을 월별로 관리 
	- 갑자기 사용하지 않은 리소스에 대해 비용이 사용된 경우 알람이 오도록 처리하여 대응
	- 매번 다이어트 고려
- **ai 리소스 관리** 
	- gpu 클러스터나 온프레미스 서버 관리 
	- private LLM 관리 
	- training 관련 / inference 관련 / rag 관련 등의 다양한 리소스 관리

클라우드 도메인 직군 
- 클라우드 네이티브 팀
- SRE( site reliability engineering ) 팀
- 클라우드 보안팀
- 데이터 보안팀
- 서비스 인프라 팀
- 백엔드 엔지니어 
- ai 엔지니어 
- 등등

#### **프로젝트 시, 클라우드 엔지니어로서 경험하면 좋은 일들** 
- **서비스 운영** 
	- 애플리케이션을 서버에 올려보고 **도메인을 붙여 서비스** 해 본 경험 
	- **서비스 리소스를 모니터링**해서 **스케일 인/스케일 아웃** 해보기
	- **개인정보처리방침과 이용 약관을 이해하고 회원가입 붙여보기** > 실제로 실무에서는 굉장히 중요함
		- 개인정보(이름이 중복일때 핸드폰 인증 > 개인을 지칭하기 위함, 휴대폰 번호를 알게되면 그 사람에 대해 알게 됨) > 마음대로 저장하면 안되고 KISA에서 정의한 규칙대로 저장해야함
- **데이터 관리**
	- 저장되는 **데이터가 손실 되었을 때 복구 가능하도록 백업 자동화** 해보기
		- crud 
	- **데이터베이스** 관리해보기 > mongodb Atlas : 클라우드 형태로 서비스를 제공
		- 위와 같은 데이터베이스가 얼마나 컴퓨팅 자원을 쓰는가를 고려할줄 알아야 한다.
- **애플리케이션 보안**
	- api 작성 시, header이용하여 토큰 기반으로 api 동작하도록 만들어보기
		- 가장 쉬운 방법: 세션
		- 토큰을 많이 이용 > 토큰을 받아올때 어디에 저장해야하는가? 
	- 클라이언트 데이터를 불러올때, api 파라미너를 조작하여 다른 계정의 데이터를 가져올 수 없게 만들기 
		- 다른 사람 데이터를 불러오지 않게 해야함
	- 주요 3rd party key 들을 보관할때, 코드에 하드 코딩하지 않고 밖으로 빼서 관리하거나 vault 통해 관리
		- 일련의 키를 관리하는 방법
			- config 파일을 따로 두어 관리
			- vault 를 통해 관리


모든 서비스는 쿠버네티스 기반으로 운영해야 할까? 
- 쿠버네티스란: 컨테이너화 된 애플리케이션의 자동 delay , scaling 등을 제공 관리하는 시스템
	- 쿠버네티스를 운영하기 위한 서버가 따로 필요함 

- 우리가 쿠버네티스 시스템을 이용한다고 했을때 기대점
	- 모니터링이 편할 것같다
	- 서비스 운영 시 스케일인/아웃이 자유로워 비용관리가 편할 것같다. 
	- 스케일 아웃이 빨라 큰 트래픽이 오더라도 빠르게 대응할 것같다
	- 배포가 편할 것같다
	- 서비스 관리를 모두 코드로 운영 가능 할 것 같다. 

- 정말 쿠버네티스가 모든 상황에 대해 최적의 솔루션일까?
	- 만약 서비스 유저가 10명쯤 되는데 정말 쿠버네티스가 필요할까?
	- 만약 , 사내 내부 시스템인데 필요할까?
	- 만약, 제품이 컨테이너로 운영해 본적이 없을때 쿠버네티스로 바로 잘 운영 할 수 있을까?

중요한건 모든 서비스가 쿠버네티스가 필요할까? 라는 고민이 필요함

#### 안정성 vs 효율성
서버 하나에 애플케이션이 떠 있습니다. 서버가 죽으면 애플리케이션도 죽습니다. 
서버를 재시작 시키고 애플리케이션을 키는데 2분 정도 걸립니다. 

Q1. 서버를 반드시 이중화 해야 할까요? 
- 여러가지 조건들을 스스로 붙이셔서 답을 만들어도 됨

- 고려사항 
	- 중요도
	- 다운타임 허용 가능 시간
	- 비용과 리소스
	- 비즈니스 연속성 계획
	- 데이터 손실의 중요성  

- 실시간으로 데이터를 관리해야하고 중요성이 높으며 비용이 감당 할 수 있는 경우에 한 해 서버를 이중화를 선택하겠지만, 만약 비용 절감이 필요하거나 어느정도 시간의 다운타임이 존재해도 괜찮은 서비스라면 클라이언트로 우회하여 사용하는 방법으로 대체하여 이중화를 선택하지 않을 것 같습니다.

- 이중화를 반드시 해야한다면 어떻게 할 것인가? 안전성과 효율성의 딜레마 

스토리지 서버를 어떻게 이중화 해야 할까요? 


- 정답은 없지만 규칙은 있다
	- 안전성을 견고히 할 수록 클라우드 비용은 늘어납니다.
	- 서비스가 죽어도 비즈니스에 큰 타격이 없는 사내 서비스라면 이중화 비용 아깝
	- 관리자는 서버가 죽었을때 다시 서버를 키는 이중화 비용 
	- 이중화를 하거나 빨리 복구하는 스크립트를 만드는 것
	- 정답은 없으니, 가장 좋은 방법을 인프라 상황과 제품 상황에 맞게 만들어야 합니다. 
- 제품의 이슈 "사용자에게 서비스를 한다"
	- 관리자가 이중화를 선택했더라도, 애플리케이션이 받쳐줘야 합니다. 
	- 만약, 애플리케이션이 비즈니스 로직을 처리하는데 중요한 데이터를 메모리에 캐싱하여 저장한다면?
	- 애플리케이션1 메모리에 저장된 중요한 데이터는 애플리케이션2에서는 가져올 수 없는 경우
	- 결국, **인프라 아키텍처는 애플리케이션에 맞춰 운영 할 수 밖에 없다**. 


99.9% 문제 없어도 0.1% 안되면 큰일나는 서비스들
- 생존과 관련된 서비스들
- 100% 실시간 서비스 
- 오류가 0에 가까워야 하는 서비스  ex. 우주
>> 안정성이 100% 중요한 경우

- 흔히 개발자가 생각하는 좋은 애플리케이션 
	- 항상 최신 버젼
	- 항상 최신 트렌드
- 사실 운영하기 좋은 애플리케이션
	- 유지보수가 편한 애플리케이션
	- 트렌드는 아니더라도 잘 죽지 않는 애플리케이션

1. 무조건 최신 버젼이 안정성을 책임 질 수 있을까?
2. 항상 최신 트렌드가 안정성을 책임 질 수 있을까?
3. 항상 최신 트렌드가 서비스가 운영하기에 유리한게 맞을까?
4. 즉, 서비스 운영 측면에서 애플리케이션의 상황이 인프랑 운영과 밀접한 관계를 맺음

우리는 제품이 변경되는 사항에 대해 항상 인지하고 있어야함


#### 그래서 어떻게 해야되는가? 
- 비즈니스 상황을 면밀히 파악 필요
	- 내가 운영하는 서비스가 얼마나 안정성을 중시하는지 확인
	- 가능한 서비스 안정성을 우선시 하되, 클라우드 비용을 최소화하려는 노력 필요
	- 서비스 매출 vs 서비스 신뢰도를 저울 질 할 필요 있음 > 장애가 나는 것에 대한
- 제품 상황을 면밀히 파악 필요
	- 내가 운영하는 제품이 컨테이너 기반으로 운영된 적 있는지
	- 이중화가 안되어 있는 경우, 이중화를 해도 문제 없을지
	- 이중화 시에 제품이 저장하는 데이터는 문제가 없을지
- 본인의 팀 상황을 면밀히 파악 필요
	- 내가 혼자이거나 소수인 팀이라면?
	- 여러 파트가 각자의 역할을 갖고 움직이고 있다면?
	- 서비스 운영 시 자동화를 얼마나 하고 있는지? > 자동화를 많이 하면 할수록 내가 고급화된 업무에 집중 
>> 커뮤니케이션의 중요성 
>> 사업 담당자, 제품 담당자, 개발 담당자 말을 듣고 그거에 맞춰 나가는 것

#### 기업에서는 클라우드 엔지니어를 언제 필요로 할까?
- 초기 스타트업, 소규모 중소기업  > 여러가지 경험을 해 본 클라우드 인재가 필요
- 클라우드 팀이 운영 되고 있는 기업 > 사업과 제품을 이해한 커뮤니케이션 에 능한 클라우드 인재
	- 동시 접속 1000명 서비스 > 어떤 서비스에 어떻게 운영이 되고 있는지? 파악 
	- 소프트웨어 스택에 따라 맞춰 나갈 수 있는 방법

#### 여러분은 어떤 엔지니어가 되고 싶으신가요?
  - 기술 리더로써, 인프라 기술을 많이 알고 여러 상황에 해결 해본 베테랑 엔지니어
  - 사업 담당자와 제품 개발자와 많은 커뮤니케이션을 해서 상황에 맞춘 인프라를 운영 해본 관리형 엔지니어
  - "커뮤니케이션을 하는 관리형 엔지니어" "베테랑 엔지니어" > 둘 다 가능한 사람


## 개념 잡기

#### IaC 란?  Infrastructure as Code 
코드형 인프라, 수동 프로세스가 아닌 코드를 통한 인프라를 관리하고 프로비저닝(**IT 인프라를 생성하고 설정하는 프로세스**)하는 것
- 프로비저닝
- 구성 관리
- 버전 제어
- 선언적 접근 or 명령형 접근
- IaC Tool
	- Chef
	- Puppet
	- Red Hat Ansible Automation Platform
	- Saltstack
	- Terraform
	- AWS CloudFormation
- CI/CD
- DevOps : 개발/ 운영 
출처: https://www.redhat.com/ko/topics/automation/what-is-infrastructure-as-code-iac

궁금한점
1. NPM에서의 package.json은 비슷한 개념 아닌가? 
	- 유사점: 둘 다 설정을 코드로 관리하고 재현 가능성을 높임 / 자동화 / 변경 사항 버전 관리
	- 차이점: IaC는 인프라(서버, 네트워크, 데이터베이스)를 관리하고 시스템 레벨 동작
	  package.json 은 패키지 의존성 관리하고 애플리케이션 레벨에서 동작
#### 서비스 장애 상황 3단계
1 단계 Warning 경고 단계 - 성능 저하나 잠재적인 문제가 발견 되었으나, 서비스는 정상적으로 동작
- 특징: 응답 시간 증가, 에러 로그 증가 / 비핵심 기능에서 문제 발생 
- 대응
	- 모니터링 강화: 성능 및 로그 모니터링하여 악화되는지 확인
	- 원인 분석: 근본 원인 파악, 해결 방안 준비
	- 커뮤니케이션: 문제상황 전파, 대응 계획 공유

2단계 High 단계 - 성능 저하 심각, 일부 서비스나 기능이 제한적이거나 불안정 상태
- 특징: 서비스 응답 시간 크게 증가 / 일부 서비스 기능 제한 및 간헐적 작동 중단
- 대응
	- 긴급 대응: 문제를 완화하기 위한 임시 조치 수행(서비스 재시작, 트래픽 우회)
	- 팀 동원: 관련 팀 소집하여 문제 해결
	- 고객 알림: 사용자에게 서비스 장애에 대한 공지

3단계 Disaster 재해 단계 - 주요 서비스 중단
- 특징: 서비스 완전히 중단되거나 동작하지 않고 다수의 사용자에게 영향 
- 대응
	- 전사적 대응: 전사척 차원의 대응팀 구성으로 문제 해결에 총력
	- 복구 계획 실행: 사전 준비된 재해 복구 계획 실행
	- 지속적 커뮤니케이션: 복구 진행 상황 알림

구글에서는 service outage severity levels라고 검색하면 해당 내용과 비슷한 내용을 찾아 볼 수 있고 어떤 곳에서는 1~5단계로 나뉘어 구별하기도 함 

#### ai 리소스 관리는 어떻게 해야 할까? 
- 고성능 컴퓨팅 리소스 : GPU, TPU
- 데이터 관리 및 스토리지: 데이터 레이크, 고속 데이터 액세스
- 모델 훈련 및 배포: 자동화된 모델 훈련 파이프라인, MLOps 도구, 모델 서빙 인프라
	- Kubeflow, MLflow
	- TensorFlow Serving, TorchServe.
- 성능 모니터링 및 최적화
	- 모니터링 도구: 성능 및 리소스 사용량 모니터링 Prometheus, Grafana
	- 알림 시스템: 이상 징후 감지 시 알림 AWS CloudWatch, Google Cloud Monitoring
- 비용 관리 
	- 리소스 최적화 - 자동 스케일링, 예약 인스턴스 
	- 비용 분석 도구 - AWS Cost Explorer, Google Cloud Billing 
- 보안 및 규정 준수
	- 데이터 암호화 - AWS KMS, Google Cloud KMS(Key Management Service)
	- 접근 제어 - IAM 정책 강화(Identity and Access Management) 
	- 규정 준수 - GDPR, HIPAA
- 데이터 전처리 및 관리
	- 데이터 준비 도구 - AWS Glue, Google Cloud
	- 데이터 버젼 관리 - DVC(Data Version Control)

참고 : ChatGPT


#### 서비스 리소스 모니터링 종류 및 방법
- 서버 모니터링 : 서버의 상태 및 성능을 모니터링하여 안전성을 유지
	- 시스템 리소스 모니터링: CPU, 메모리 사용률, 디스크 I/O, 네트워크 트래픽
	- **툴**: Nagios, Zabbix, Prometheus, Datadog, New Relic.
- 애플리케이션 모니터링: 애플리케이션의 성능과 가용성을 모니터링하여 사용자 경험 개선
	- 애플리케이션 성능 모니터링(APM): 응답시간, 처리량, 오류율 추적
	- **툴**: New Relic, Dynatrace, AppDynamics, Elastic APM.
- 네트워크 모니터링: 네트워크 인프라 상태와 성능 모니터링하여 네트워크 장애 예방
	- 네트워크 트래픽 분석: 패킷 손실, 대기 시간, 네트워크 대역폭 사용량
	- **툴**: Wireshark, SolarWinds, PRTG Network Monitor, Nagios.
- 데이터 베이스 모니터링: 성능과 가용성을 모니터링하여 데이터 접근 시간 최적화
	- 쿼리 성능 모니터링: 느린 쿼리, 잠금, 인덱스 사용률 분석
	- **툴**: SolarWinds Database Performance Analyzer, Datadog, New Relic, Oracle Enterprise Manager.
- 로그 모니터링: 시스템 및 애플리케이션 로그를 분석하여 문제 식별 및 해결
	- 로그 수집 및 분석: 로그데이터 수집, 실시간 분석하여 이상 징후 탐지
	- **툴**: ELK Stack(Elasticsearch, Logstash, Kibana), Splunk, Graylog.
- 클라우드 모니터링: 클라우드 리소스의 사용량과 성능 모니터링
	- 클라우드 서비스 모니터링: 클라우드 인스턴스, 스토리지, 네트워크 등의 사용량과 성능 모니터링
	- **툴**: AWS CloudWatch, Google Cloud Monitoring, Azure Monitor.
- 컨테이너 모니터링: 컨테이너화된 애플리케이션의 성능과 상태를 모니터링하여 안정적인 운영 보장
	- 컨테이너 리소스 모니터링: 컨테이너의 CPU모니터링, 메모리, 네트워크 사용량
	- **툴**: Prometheus, Grafana, Kubernetes Dashboard, Datadog.
- 사용자 경험 모니터링 : 최종 사용자 경험을 모니터링하여 서비스 품질 향상
	- 실제 사용자 모니터링(RUM): 실제 사용자 데이터를 기반으로 웹 애플리케이션 성능 모니터링
	- **툴**: Google Analytics, New Relic, Dynatrace.
- 보안 모니터링: 보안 위협 탐지 및 대응
	- 침입 탐지 및 방지 시스템( IDS/IPS): 비정상적인 활동 감지하고 경고
	- **툴**: Snort, Suricata, OSSEC.
- 종합적인 모니터링: 모든 리소스와 서비스를 일관되게 모니터링
	- 통합 대시보드:  다양한 모니터링 도구의 데이터를 하나의 대시보드에서 종합적으로 관리
	- **툴**: Grafana, Datadog, Splunk.

#### 개인정보처리 방침

국내의 개인정보 처리방침 
: `개인정보보호위원회(이하 개인정보위'라 한다)는 정보주체의 자유와 권리 보호를 위해 「개인정보 보호법」 및 관계 법령이 정한 바를 준수하여, 적법하게 개인정보를 처리하고 안전하게 관리하고 있습니다. 이에 「개인정보 보호법」 제30조에 따라 정보주체에게 개인정보 처리에 관한 절차 및 기준을 안내하고, 이와 관련한 고충을 신속하고 원활하게 처리할 수 있도록 하기 위하여 다음과 같이 개인정보 처리방침을 수립 ‧ 공개합니다.`

- 개인정보의 처리 목적, 보유기간
- 개인정보파일의 등록 현황
- 14세 미만 아동의 개인정보 처리에 관한 사항
- 개인정보 영향평가 수행 결과
- 개인정보의 제 3자 제공에 관한 사항
- 개인정보의 파기 절차 및 파기 방법
- 정보주체와 법제 대리인의 권리, 의무 및 그 행사방법에 관한 사항
- 추가적인 이용, 제공 판단 기준
- 개인정보 안전성 확보조치에 관한 사항
- 개인정보 보호 책임자에 관한 사항
- 개인정보의 열람 청구를 접수,처리하는 부서
- 정보주체의 권익침해에 대한 구제 방법
- 개인정보 보호수준 평가 결과
- 개인정보 처리방침의 변경에 관한 사항

유럽 개인정보 처리방침은 다음에 보는걸로


#### 쿠버네티스
- 컨테이너화된 애플리케이션을 자동으로 배포, 스케일링 및 운영하는 오픈소스 플랫폼
- 클러스터
- 노드
- 파드
- 서비스
- 디플로이먼트
- 네임스페이스
- 컨피그맵, 시크릿

주요 기능 및 장점 
- 서비스 디스커버리와 로드 밸런싱
- 스토리지 오케스트레이션
- 자동화된 롤아웃과 롤백
- 자동화된 빈 패킹(bin packing )
- 자동화된 복구(self- healing)
- 시크릿과 구성 관리




